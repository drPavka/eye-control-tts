(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,i){t.exports=i("zUnb")},zUnb:function(t,e,i){"use strict";i.r(e);var s=i("fXoL");const n="https://texttospeech.googleapis.com/v1/",a={production:!0,apiKeyObj:{"X-Goog-Api-Key":"AIzaSyBUrG7YyqBHH-TcgwACamVt3mlNU2u5dR4"},voicesList:n+"voices",synthesize:n+"text:synthesize"};var c=i("jhN1"),o=i("tyNb"),r=i("/t3+");let p=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Eb({type:t,selectors:[["app-layout"]],decls:8,vars:0,consts:[[1,"card-container"],[1,"card"],["color","primary"],["src","./assets/logo.png"],[1,"container"]],template:function(t,e){1&t&&(s.Pb(0,"div",0),s.Pb(1,"div",1),s.Pb(2,"mat-toolbar",2),s.Lb(3,"img",3),s.Pb(4,"h1"),s.oc(5,"Text to speech"),s.Ob(),s.Ob(),s.Pb(6,"div",4),s.Lb(7,"router-outlet"),s.Ob(),s.Ob(),s.Ob())},directives:[r.a,o.b],styles:[".container[_ngcontent-%COMP%]{padding:36px;margin-top:56px}@media (min-width:480px){.container[_ngcontent-%COMP%]{margin-top:auto}}img[_ngcontent-%COMP%]{height:36px;margin-right:12px}"],changeDetection:0}),t})();var b=i("XiUz"),u=i("3Pt+"),l=i("2Vo4"),d=i("xgIS"),h=i("LRne"),f=i("Cfvw"),g=i("tk/3"),m=i("vkgz"),O=i("pLZG"),v=i("lJxs"),_=i("wO+i"),y=i("UXun"),$=i("zp1y"),x=i("eIep"),w=function(t){return t[t.disabled=0]="disabled",t[t.playing=1]="playing",t[t.paused=2]="paused",t[t.stopped=3]="stopped",t}({});let j=(()=>{class t{constructor(t){this._http=t,this.state$$=new l.a(w.disabled),this.state$=this.state$$.asObservable().pipe(Object(m.a)(console.log.bind(console))),this.__audio=null,this.text$$=new l.a(""),this._text$=this.text$$.asObservable().pipe(Object(O.a)(t=>!!t)),this.voice$$=new l.a(null),this.speakingRate$$=new l.a(1),this._voices$=null,this._voice$=this.voice$$.asObservable().pipe(Object(O.a)(t=>!!t),Object(v.a)(t=>{const{languageCodes:e,name:i,ssmlGender:s}=t,[n]=e;return{languageCode:n,name:i,ssmlGender:s}})),this._speakingRate$=this.speakingRate$$.asObservable().pipe()}get voices$(){if(!this._voices$){const t=(new g.d).append("languageCode","en-US");this._voices$=this._http.get(a.voicesList+"?"+t.toString()).pipe(Object(_.a)("voices"),Object(v.a)(t=>t),Object(v.a)(t=>t.filter(t=>t.languageCodes.includes("en-US"))),Object(y.a)(1))}return this._voices$}get _audio(){return this.__audio||(this.__audio=new Audio,Object(d.a)(this.__audio,"ended").pipe(Object(m.a)(()=>{this.state$$.next(w.stopped)})).subscribe(),Object(d.a)(this.__audio,"pause").pipe(Object(m.a)(()=>{this.state$$.next(w.paused)})).subscribe()),this.__audio}play$(){return Object(h.a)({audioConfig:{audioEncoding:"MP3"}}).pipe(Object($.a)(this._voice$,this._speakingRate$,this._text$),Object(v.a)(([t,e,i,s])=>Object.assign({},t,{voice:e,input:{text:s},audioConfig:{speakingRate:i,audioEncoding:"MP3"}})),Object(m.a)(()=>{this.state$$.next(w.playing)}),Object(x.a)(t=>this._http.post(a.synthesize,t)),Object(_.a)("audioContent"),Object(v.a)(t=>"data:audio/mpeg;base64, "+t),Object(m.a)(t=>{this._audio.src=t,this._audio.load()}),Object(x.a)(()=>Object(f.a)(this._audio.play())))}pause(){this._audio.pause()}}return t.\u0275fac=function(e){return new(e||t)(s.Tb(g.b))},t.\u0275prov=s.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var P=i("quSY"),k=i("Kj3r"),C=i("/uUt"),L=i("kmnG"),z=i("qFsG");let I=(()=>{class t{constructor(t){this._player=t,this._subscription=new P.a,this.text=new u.b("",u.j.required)}ngOnInit(){this._subscription.add(this.text.valueChanges.pipe(Object(k.a)(500),Object(C.a)(),Object(m.a)(()=>{this._player.state$$.next(this.text.invalid?w.disabled:w.stopped)}),Object(O.a)(()=>this.text.valid)).subscribe(this._player.text$$))}ngOnDestroy(){this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(j))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-text"]],decls:5,vars:1,consts:[["appearance","fill","floatLabel","auto"],["matInput","","rows","10",3,"formControl"]],template:function(t,e){1&t&&(s.Pb(0,"div"),s.Pb(1,"mat-form-field",0),s.Pb(2,"mat-label"),s.oc(3,"Text to speech"),s.Ob(),s.Lb(4,"textarea",1),s.Ob(),s.Ob()),2&t&&(s.zb(4),s.ec("formControl",e.text))},directives:[L.b,L.e,z.a,u.a,u.g,u.c],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),t})();var R=i("XNiG"),D=i("bTqV"),E=i("NFeN");let F=(()=>{class t{constructor(t,e){this._player=t,this._changeRef=e,this.click$$=new R.a,this.icon="play_arrow",this._subscription=new P.a}ngAfterViewInit(){this._subscription.add(this._player.state$.pipe(Object(m.a)(t=>{switch(t){case w.disabled:this._button.disabled=!0,this.icon="play_arrow";break;case w.playing:this._button.disabled=!1,this.icon="pause";break;case w.paused:case w.stopped:this._button.disabled=!1,this.icon="play_arrow"}this._changeRef.detectChanges()})).subscribe())}ngOnInit(){this._subscription.add(this.click$$.asObservable().pipe(Object($.a)(this._player.state$$),Object(x.a)(([,t])=>{let e=Object(h.a)();switch(t){case w.playing:this._player.pause();break;case w.paused:case w.stopped:e=this._player.play$()}return e})).subscribe())}ngOnDestroy(){this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(j),s.Kb(s.h))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-player"]],viewQuery:function(t,e){var i;1&t&&s.rc(D.a,!0),2&t&&s.fc(i=s.Yb())&&(e._button=i.first)},decls:4,vars:1,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"container"],["mat-fab","",3,"click"]],template:function(t,e){1&t&&(s.Pb(0,"div",0),s.Pb(1,"button",1),s.Xb("click",(function(){return e.click$$.next()})),s.Pb(2,"mat-icon"),s.oc(3),s.Ob(),s.Ob(),s.Ob()),2&t&&(s.zb(3),s.pc(e.icon))},directives:[b.c,b.b,D.a,E.a],styles:[".container[_ngcontent-%COMP%]{margin-top:36px;margin-bottom:24px}"],changeDetection:0}),t})();var K=i("ofXK"),U=i("d3UM"),G=i("FKr1");let M=(()=>{class t{transform(t,...e){return t.name.substr(6)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Jb({name:"voiceName",type:t,pure:!0}),t})();function N(t,e){if(1&t&&(s.Pb(0,"mat-option",4),s.oc(1),s.ac(2,"voiceName"),s.Ob()),2&t){const t=e.$implicit;s.ec("value",t),s.zb(1),s.qc(" ",s.bc(2,2,t)," ")}}function V(t,e){if(1&t&&(s.Pb(0,"mat-form-field"),s.Pb(1,"mat-icon",1),s.oc(2,"record_voice_over"),s.Ob(),s.Pb(3,"mat-select",2),s.nc(4,N,3,4,"mat-option",3),s.Ob(),s.Ob()),2&t){const t=e.ngIf,i=s.Zb();s.zb(3),s.ec("formControl",i.selectedVoice),s.zb(1),s.ec("ngForOf",t)}}let S=(()=>{class t{constructor(t){this._player=t,this.selectedVoice=new u.b,this._subscription=new P.a,this.voiceList$=this._player.voices$.pipe(Object(m.a)(t=>{this.selectedVoice.setValue(t[0])}))}ngOnInit(){this._subscription.add(this.selectedVoice.valueChanges.pipe().subscribe(this._player.voice$$))}ngOnDestroy(){this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(j))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-voice-selector"]],decls:2,vars:3,consts:[[4,"ngIf"],["inline","","matPrefix","",2,"margin-right","12px"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(s.nc(0,V,5,2,"mat-form-field",0),s.ac(1,"async")),2&t&&s.ec("ngIf",s.bc(1,1,e.voiceList$))},directives:[K.k,L.b,E.a,L.f,U.a,u.g,u.c,K.j,G.f],pipes:[K.b,M],styles:[".mat-form-field[_ngcontent-%COMP%]{color:grey}"],changeDetection:0}),t})();function T(t,e){if(1&t&&(s.Pb(0,"mat-option",3),s.oc(1),s.Ob()),2&t){const t=e.index;s.ec("value",e.$implicit),s.zb(1),s.qc(" Speed ",t+1," ")}}let q=(()=>{class t{constructor(t){this._player=t,this.speakingRate=new u.b(1),this.speakingRates=[.25,.5,1,1.5,2.5],this._subscription=new P.a}ngOnInit(){this._subscription.add(this.speakingRate.valueChanges.pipe().subscribe(this._player.speakingRate$$))}ngOnDestroy(){this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(j))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-speaking-rate"]],decls:5,vars:2,consts:[["inline","","matPrefix","",2,"margin-right","12px"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(s.Pb(0,"mat-form-field"),s.Pb(1,"mat-icon",0),s.oc(2,"speed"),s.Ob(),s.Pb(3,"mat-select",1),s.nc(4,T,2,2,"mat-option",2),s.Ob(),s.Ob()),2&t&&(s.zb(3),s.ec("formControl",e.speakingRate),s.zb(1),s.ec("ngForOf",e.speakingRates))},directives:[L.b,E.a,L.f,U.a,u.g,u.c,K.j,G.f],styles:[""],changeDetection:0}),t})();const X=[{path:"",component:p,children:[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Eb({type:t,selectors:[["app-main-page"]],decls:6,vars:0,consts:[["fxLayout","column"],["fxLayout","column","fxLayout.gt-sm","row wrap","fxLayoutGap","12px"],["fxFlex","calc(60% - 12px)"],["fxFlex","calc(40% - 12px)"]],template:function(t,e){1&t&&(s.Pb(0,"div",0),s.Lb(1,"app-text"),s.Lb(2,"app-player"),s.Pb(3,"div",1),s.Lb(4,"app-voice-selector",2),s.Lb(5,"app-speaking-rate",3),s.Ob(),s.Ob())},directives:[b.c,I,F,b.d,S,b.a,q],styles:[""],changeDetection:0}),t})()}]}];let A=(()=>{class t{}return t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({factory:function(e){return new(e||t)},imports:[[o.a.forRoot(X)],o.a]}),t})(),H=(()=>{class t{constructor(t){t.setTitle("Eye Control test task: Text to speech application ")}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(c.c))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&s.Lb(0,"router-outlet")},directives:[o.b],encapsulation:2,changeDetection:0}),t})();var J=i("R1ws");let Y=(()=>{class t{constructor(){}intercept(t,e){return t=t.clone({setHeaders:a.apiKeyObj}),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Gb({token:t,factory:t.\u0275fac}),t})(),B=(()=>{class t{}return t.\u0275mod=s.Ib({type:t,bootstrap:[H]}),t.\u0275inj=s.Hb({factory:function(e){return new(e||t)},providers:[{provide:g.a,multi:!0,useClass:Y}],imports:[[c.a,A,J.b,r.b,u.i,u.e,L.d,z.b,D.b,E.b,g.c,U.b,b.e]]}),t})();a.production&&Object(s.S)(),c.d().bootstrapModule(B).catch(t=>console.error(t))},zn8P:function(t,e){function i(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}i.keys=function(){return[]},i.resolve=i,t.exports=i,i.id="zn8P"}},[[0,0,4]]]);