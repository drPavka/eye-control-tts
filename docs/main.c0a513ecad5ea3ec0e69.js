(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,s){e.exports=s("zUnb")},zUnb:function(e,t,s){"use strict";s.r(t);var n=s("fXoL");const i="https://texttospeech.googleapis.com/v1/",a={production:!0,apiKeyObj:{"X-Goog-Api-Key":"AIzaSyBUrG7YyqBHH-TcgwACamVt3mlNU2u5dR4"},voicesList:i+"voices",synthesize:i+"text:synthesize"};var c=s("jhN1"),o=s("tyNb"),r=s("/t3+");let p=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Eb({type:e,selectors:[["app-layout"]],decls:8,vars:0,consts:[[1,"card-container"],[1,"card"],["color","primary"],["src","./assets/logo.png"],[1,"container"]],template:function(e,t){1&e&&(n.Pb(0,"div",0),n.Pb(1,"div",1),n.Pb(2,"mat-toolbar",2),n.Lb(3,"img",3),n.Pb(4,"h1"),n.qc(5,"Text to speech"),n.Ob(),n.Ob(),n.Pb(6,"div",4),n.Lb(7,"router-outlet"),n.Ob(),n.Ob(),n.Ob())},directives:[r.a,o.b],styles:[".container[_ngcontent-%COMP%]{padding:36px;margin-top:56px}@media (min-width:480px){.container[_ngcontent-%COMP%]{margin-top:auto}}img[_ngcontent-%COMP%]{height:36px;margin-right:12px}"],changeDetection:0}),e})();var b=s("XiUz"),u=s("3Pt+"),l=s("2Vo4"),d=s("xgIS"),h=s("LRne"),f=s("Cfvw"),g=s("tk/3"),m=s("pLZG"),v=s("lJxs"),O=s("wO+i"),_=s("UXun"),y=s("vkgz"),$=s("zp1y"),x=s("eIep"),w=function(e){return e[e.disabled=0]="disabled",e[e.playing=1]="playing",e[e.paused=2]="paused",e[e.stopped=3]="stopped",e}({});let j=(()=>{class e{constructor(e){this._http=e,this.state$$=new l.a(w.disabled),this.state$=this.state$$.asObservable().pipe(),this.__audio=null,this.text$$=new l.a(""),this._text$=this.text$$.asObservable().pipe(Object(m.a)(e=>!!e)),this.voice$$=new l.a(null),this.speakingRate$$=new l.a(1),this._voices$=null,this._voice$=this.voice$$.asObservable().pipe(Object(m.a)(e=>!!e),Object(v.a)(e=>{const{languageCodes:t,name:s,ssmlGender:n}=e,[i]=t;return{languageCode:i,name:s,ssmlGender:n}})),this._speakingRate$=this.speakingRate$$.asObservable().pipe()}get voices$(){if(!this._voices$){const e=(new g.d).append("languageCode","en-US");this._voices$=this._http.get(a.voicesList+"?"+e.toString()).pipe(Object(O.a)("voices"),Object(v.a)(e=>e),Object(v.a)(e=>e.filter(e=>e.languageCodes.includes("en-US"))),Object(_.a)(1))}return this._voices$}get _audio(){return this.__audio||(this.__audio=new Audio,Object(d.a)(this.__audio,"ended").pipe(Object(y.a)(()=>{this.state$$.next(w.stopped)})).subscribe(),Object(d.a)(this.__audio,"pause").pipe(Object(y.a)(()=>{this.state$$.next(w.paused)})).subscribe()),this.__audio}play$(){return Object(h.a)({audioConfig:{audioEncoding:"MP3"}}).pipe(Object($.a)(this._voice$,this._speakingRate$,this._text$),Object(v.a)(([e,t,s,n])=>Object.assign({},e,{voice:t,input:{text:n},audioConfig:{speakingRate:s,audioEncoding:"MP3"}})),Object(y.a)(()=>{this.state$$.next(w.playing)}),Object(x.a)(e=>this._http.post(a.synthesize,e)),Object(O.a)("audioContent"),Object(v.a)(e=>"data:audio/mpeg;base64, "+e),Object(y.a)(e=>{this._audio.src=e,this._audio.load()}),Object(x.a)(()=>Object(f.a)(this._audio.play())))}pause(){this._audio.pause()}}return e.\u0275fac=function(t){return new(t||e)(n.Tb(g.b))},e.\u0275prov=n.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var k=s("quSY"),P=s("Kj3r"),C=s("/uUt"),L=s("kmnG"),z=s("qFsG");let R=(()=>{class e{constructor(e){this._player=e,this._subscription=new k.a,this.text=new u.b("",u.j.required)}ngOnInit(){this._subscription.add(this.text.valueChanges.pipe(Object(P.a)(500),Object(C.a)(),Object(y.a)(()=>{this._player.state$$.next(this.text.invalid?w.disabled:w.stopped)}),Object(m.a)(()=>this.text.valid)).subscribe(this._player.text$$))}ngOnDestroy(){this._subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Kb(j))},e.\u0275cmp=n.Eb({type:e,selectors:[["app-text"]],decls:5,vars:1,consts:[["appearance","fill","floatLabel","auto"],["matInput","","rows","10",3,"formControl"]],template:function(e,t){1&e&&(n.Pb(0,"div"),n.Pb(1,"mat-form-field",0),n.Pb(2,"mat-label"),n.qc(3,"Text to speech"),n.Ob(),n.Lb(4,"textarea",1),n.Ob(),n.Ob()),2&e&&(n.zb(4),n.ec("formControl",t.text))},directives:[L.b,L.e,z.a,u.a,u.g,u.c],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e})();var I=s("XNiG"),D=s("bTqV"),E=s("NFeN");let K=(()=>{class e{constructor(e,t){this._player=e,this._changeRef=t,this.click$$=new I.a,this.icon="play_arrow",this._subscription=new k.a}ngAfterViewInit(){this._subscription.add(this._player.state$.pipe(Object(y.a)(e=>{switch(e){case w.disabled:this._button.disabled=!0,this.icon="play_arrow";break;case w.playing:this._button.disabled=!1,this.icon="pause";break;case w.paused:case w.stopped:this._button.disabled=!1,this.icon="play_arrow"}this._changeRef.detectChanges()})).subscribe())}ngOnInit(){this._subscription.add(this.click$$.asObservable().pipe(Object($.a)(this._player.state$$),Object(x.a)(([,e])=>{let t=Object(h.a)();switch(e){case w.playing:this._player.pause();break;case w.paused:case w.stopped:t=this._player.play$()}return t})).subscribe())}ngOnDestroy(){this._subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Kb(j),n.Kb(n.h))},e.\u0275cmp=n.Eb({type:e,selectors:[["app-player"]],viewQuery:function(e,t){var s;1&e&&n.tc(D.a,!0),2&e&&n.fc(s=n.Yb())&&(t._button=s.first)},decls:4,vars:1,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"container"],["mat-fab","",3,"click"]],template:function(e,t){1&e&&(n.Pb(0,"div",0),n.Pb(1,"button",1),n.Xb("click",(function(){return t.click$$.next()})),n.Pb(2,"mat-icon"),n.qc(3),n.Ob(),n.Ob(),n.Ob()),2&e&&(n.zb(3),n.rc(t.icon))},directives:[b.c,b.b,D.a,E.a],styles:[".container[_ngcontent-%COMP%]{margin-top:36px;margin-bottom:24px}"],changeDetection:0}),e})();var q=s("ofXK"),F=s("d3UM"),G=s("FKr1");let U=(()=>{class e{transform(e,...t){return e.name.substr(6)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Jb({name:"voiceName",type:e,pure:!0}),e})();function M(e,t){if(1&e&&(n.Pb(0,"mat-option",4),n.qc(1),n.ac(2,"voiceName"),n.Ob()),2&e){const e=t.$implicit;n.ec("value",e),n.zb(1),n.sc(" ",n.bc(2,2,e)," ")}}function N(e,t){if(1&e&&(n.Pb(0,"mat-form-field"),n.Pb(1,"mat-icon",1),n.qc(2,"record_voice_over"),n.Ob(),n.Pb(3,"mat-select",2),n.pc(4,M,3,4,"mat-option",3),n.Ob(),n.Ob()),2&e){const e=t.ngIf,s=n.Zb();n.zb(3),n.ec("formControl",s.selectedVoice),n.zb(1),n.ec("ngForOf",e)}}let T=(()=>{class e{constructor(e){this._player=e,this.selectedVoice=new u.b,this._subscription=new k.a,this.voiceList$=this._player.voices$.pipe(Object(y.a)(e=>{this.selectedVoice.setValue(e[0])}))}ngOnInit(){this._subscription.add(this.selectedVoice.valueChanges.pipe().subscribe(this._player.voice$$))}ngOnDestroy(){this._subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Kb(j))},e.\u0275cmp=n.Eb({type:e,selectors:[["app-voice-selector"]],decls:2,vars:3,consts:[[4,"ngIf"],["inline","","matPrefix","",2,"margin-right","12px"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(n.pc(0,N,5,2,"mat-form-field",0),n.ac(1,"async")),2&e&&n.ec("ngIf",n.bc(1,1,t.voiceList$))},directives:[q.k,L.b,E.a,L.f,F.a,u.g,u.c,q.j,G.f],pipes:[q.b,U],styles:[".mat-form-field[_ngcontent-%COMP%]{color:grey}"],changeDetection:0}),e})();function V(e,t){if(1&e&&(n.Pb(0,"mat-option",3),n.qc(1),n.Ob()),2&e){const e=t.index;n.ec("value",t.$implicit),n.zb(1),n.sc(" Speed ",e+1," ")}}let S=(()=>{class e{constructor(e){this._player=e,this.speakingRate=new u.b(1),this.speakingRates=[.25,.5,1,1.5,2.5],this._subscription=new k.a}ngOnInit(){this._subscription.add(this.speakingRate.valueChanges.pipe().subscribe(this._player.speakingRate$$))}ngOnDestroy(){this._subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Kb(j))},e.\u0275cmp=n.Eb({type:e,selectors:[["app-speaking-rate"]],decls:5,vars:2,consts:[["inline","","matPrefix","",2,"margin-right","12px"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(n.Pb(0,"mat-form-field"),n.Pb(1,"mat-icon",0),n.qc(2,"speed"),n.Ob(),n.Pb(3,"mat-select",1),n.pc(4,V,2,2,"mat-option",2),n.Ob(),n.Ob()),2&e&&(n.zb(3),n.ec("formControl",t.speakingRate),n.zb(1),n.ec("ngForOf",t.speakingRates))},directives:[L.b,E.a,L.f,F.a,u.g,u.c,q.j,G.f],styles:[""],changeDetection:0}),e})();const X=[{path:"",component:p,children:[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Eb({type:e,selectors:[["app-main-page"]],decls:6,vars:0,consts:[["fxLayout","column"],["fxLayout","column","fxLayout.gt-sm","row wrap","fxLayoutGap","12px"],["fxFlex","calc(60% - 12px)"],["fxFlex","calc(40% - 12px)"]],template:function(e,t){1&e&&(n.Pb(0,"div",0),n.Lb(1,"app-text"),n.Lb(2,"app-player"),n.Pb(3,"div",1),n.Lb(4,"app-voice-selector",2),n.Lb(5,"app-speaking-rate",3),n.Ob(),n.Ob())},directives:[b.c,R,K,b.d,T,b.a,S],styles:[""],changeDetection:0}),e})()}]}];let A=(()=>{class e{}return e.\u0275mod=n.Ib({type:e}),e.\u0275inj=n.Hb({factory:function(t){return new(t||e)},imports:[[o.a.forRoot(X)],o.a]}),e})(),H=(()=>{class e{constructor(e){e.setTitle("Eye Control test task: Text to speech application ")}}return e.\u0275fac=function(t){return new(t||e)(n.Kb(c.c))},e.\u0275cmp=n.Eb({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&n.Lb(0,"router-outlet")},directives:[o.b],encapsulation:2,changeDetection:0}),e})();var J=s("R1ws");let Y=(()=>{class e{constructor(){}intercept(e,t){return e=e.clone({setHeaders:a.apiKeyObj}),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Gb({token:e,factory:e.\u0275fac}),e})();var B=s("dNgK");let Z=(()=>{class e{constructor(e,t){this._zone=e,this._snack=t}handleError(e){console.error(e),this._zone.run(()=>{this._snackRef=this._snack.open(e.message,"Close",{duration:5e3,panelClass:"snack-error"});const t=this._snackRef.afterDismissed().subscribe(()=>{t.unsubscribe()})})}}return e.\u0275fac=function(t){return new(t||e)(n.Tb(n.z),n.Tb(B.a))},e.\u0275prov=n.Gb({token:e,factory:e.\u0275fac}),e})(),Q=(()=>{class e{}return e.\u0275mod=n.Ib({type:e,bootstrap:[H]}),e.\u0275inj=n.Hb({factory:function(t){return new(t||e)},providers:[{provide:n.m,useClass:Z},{provide:g.a,multi:!0,useClass:Y}],imports:[[c.a,A,J.b,r.b,u.i,u.e,L.d,z.b,D.b,E.b,g.c,F.b,b.e,B.b]]}),e})();a.production&&Object(n.S)(),c.d().bootstrapModule(Q).catch(e=>console.error(e))},zn8P:function(e,t){function s(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}s.keys=function(){return[]},s.resolve=s,e.exports=s,s.id="zn8P"}},[[0,0,4]]]);